# ğŸ—ï¸ ARCHITECTURE SYSTÃˆME - Immo GuinÃ©e

## ğŸ“Š Vue d'Ensemble

```
â”Œâ”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”
â”‚                    UTILISATEURS FINAUX                       â”‚
â”‚  ğŸ‘¤ Particuliers  |  ğŸ¢ Agents  |  ğŸ›ï¸ Agences  |  ğŸ“± Mobile â”‚
â””â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”¬â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”˜
                 â”‚
                 â–¼
â”Œâ”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”
â”‚                   COUCHE PRÃ‰SENTATION                        â”‚
â”œâ”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”¤
â”‚  React Web App           â”‚  React Native Mobile App         â”‚
â”‚  (Port 3000)             â”‚  (Expo)                          â”‚
â”‚  â€¢ Pages publiques       â”‚  â€¢ Navigation native             â”‚
â”‚  â€¢ Espace utilisateur    â”‚  â€¢ CamÃ©ra / GPS                  â”‚
â”‚  â€¢ Interface admin       â”‚  â€¢ Notifications push            â”‚
â””â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”¬â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”˜
                 â”‚
                 â–¼
â”Œâ”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”
â”‚                      API GATEWAY                             â”‚
â”‚                   Nginx (Port 8080)                          â”‚
â”‚  â€¢ Load Balancing        â€¢ Rate Limiting                    â”‚
â”‚  â€¢ SSL Termination       â€¢ Compression                      â”‚
â””â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”¬â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”˜
                 â”‚
                 â–¼
â”Œâ”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”
â”‚                    COUCHE BUSINESS                           â”‚
â”‚                  Laravel API (PHP-FPM)                       â”‚
â”œâ”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”¤
â”‚  Controllers  â”‚  Services  â”‚  Models  â”‚  Repositories       â”‚
â”‚  â€¢ Auth       â”‚  â€¢ Search  â”‚  â€¢ User  â”‚  â€¢ PropertyRepo     â”‚
â”‚  â€¢ Property   â”‚  â€¢ Upload  â”‚  â€¢ Prop. â”‚  â€¢ UserRepo         â”‚
â”‚  â€¢ User       â”‚  â€¢ Payment â”‚  â€¢ Image â”‚  â€¢ MessageRepo      â”‚
â”‚  â€¢ Message    â”‚  â€¢ SMS     â”‚  â€¢ Loc.  â”‚  ...                â”‚
â””â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”¬â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”˜
                 â”‚
                 â”œâ”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”¬â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”¬â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”
                 â–¼              â–¼              â–¼              â–¼
â”Œâ”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”  â”Œâ”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”  â”Œâ”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”  â”Œâ”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”
â”‚   PostgreSQL     â”‚  â”‚    Redis     â”‚  â”‚ Elasticsearchâ”‚  â”‚   MinIO    â”‚
â”‚   (Port 5432)    â”‚  â”‚  (Port 6379) â”‚  â”‚ (Port 9200)  â”‚  â”‚(Ports 9000)â”‚
â”œâ”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”¤  â”œâ”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”¤  â”œâ”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”¤  â”œâ”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”¤
â”‚ â€¢ users          â”‚  â”‚ â€¢ Cache      â”‚  â”‚ â€¢ Full-text â”‚  â”‚ â€¢ Images   â”‚
â”‚ â€¢ properties     â”‚  â”‚ â€¢ Sessions   â”‚  â”‚   search    â”‚  â”‚ â€¢ Docs     â”‚
â”‚ â€¢ messages       â”‚  â”‚ â€¢ Queues     â”‚  â”‚ â€¢ Faceted   â”‚  â”‚ â€¢ Videos   â”‚
â”‚ â€¢ locations      â”‚  â”‚ â€¢ Rate limit â”‚  â”‚   filters   â”‚  â”‚ â€¢ Backups  â”‚
â”‚ â€¢ reviews        â”‚  â”‚              â”‚  â”‚             â”‚  â”‚            â”‚
â””â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”˜  â””â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”˜  â””â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”˜  â””â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”˜
                 â”‚
                 â–¼
â”Œâ”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”
â”‚                   COUCHE AUTOMATISATION                      â”‚
â”‚                      n8n (Port 5678)                         â”‚
â”œâ”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”¤
â”‚  ğŸ¤– Agents IA:                                              â”‚
â”‚  â€¢ ModÃ©ration annonces    â€¢ Notifications intelligentes     â”‚
â”‚  â€¢ Recherche IA          â€¢ Estimation prix                  â”‚
â”‚  â€¢ Chatbot support       â€¢ Analytics & insights             â”‚
â”‚  â€¢ QualitÃ© photos        â€¢ Recommandations                  â”‚
â””â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”˜
                 â”‚
                 â–¼
â”Œâ”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”
â”‚                   SERVICES EXTERNES                          â”‚
â”œâ”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”¤
â”‚  Orange Money  â”‚  MTN Mobile  â”‚  SMS GuinÃ©e  â”‚  Claude AI  â”‚
â”‚  Maps API      â”‚  Email SMTP  â”‚  Analytics   â”‚  Storage S3 â”‚
â””â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”˜
```

---

## ğŸ”„ Flux de DonnÃ©es Principaux

### 1. Publication d'une Annonce

```
Utilisateur (Mobile/Web)
    â”‚
    â–¼ POST /api/properties
Laravel API
    â”‚
    â”œâ”€â–º Validation des donnÃ©es
    â”‚
    â”œâ”€â–º Upload images â†’ MinIO
    â”‚
    â”œâ”€â–º Sauvegarde â†’ PostgreSQL
    â”‚
    â”œâ”€â–º Indexation â†’ Elasticsearch
    â”‚
    â”œâ”€â–º Webhook â†’ n8n (ModÃ©ration IA)
    â”‚   â”‚
    â”‚   â”œâ”€â–º Analyse Claude AI
    â”‚   â”‚
    â”‚   â””â”€â–º Mise Ã  jour statut
    â”‚
    â”œâ”€â–º Queue â†’ Notifications
    â”‚
    â””â”€â–º Response JSON
```

### 2. Recherche d'Annonces

```
Utilisateur tape "appartement 3 piÃ¨ces Kaloum"
    â”‚
    â–¼ GET /api/properties/search
Laravel API
    â”‚
    â”œâ”€â–º Check Redis Cache
    â”‚   â””â”€â–º Cache HIT ? Return cached
    â”‚
    â”œâ”€â–º Webhook â†’ n8n (Analyse requÃªte IA)
    â”‚   â”‚
    â”‚   â””â”€â–º Claude AI enrichit la requÃªte
    â”‚
    â”œâ”€â–º Query Elasticsearch
    â”‚   â”‚
    â”‚   â”œâ”€â–º Full-text search
    â”‚   â”œâ”€â–º Filtres (prix, localisation, etc.)
    â”‚   â””â”€â–º Ranking (pertinence + popularitÃ©)
    â”‚
    â”œâ”€â–º Fetch details â†’ PostgreSQL
    â”‚
    â”œâ”€â–º Load images URLs â†’ MinIO
    â”‚
    â”œâ”€â–º Store in Redis Cache (10 min)
    â”‚
    â””â”€â–º Response JSON + Pagination
```

### 3. Messagerie Interne

```
User A envoie message Ã  User B
    â”‚
    â–¼ POST /api/messages
Laravel API
    â”‚
    â”œâ”€â–º Sauvegarde â†’ PostgreSQL
    â”‚
    â”œâ”€â–º Pub/Sub â†’ Redis
    â”‚
    â”œâ”€â–º Queue Job â†’ Notification
    â”‚   â”‚
    â”‚   â”œâ”€â–º Email via MailHog (dev) / SMTP (prod)
    â”‚   â”‚
    â”‚   â”œâ”€â–º SMS via Orange/MTN (si activÃ©)
    â”‚   â”‚
    â”‚   â””â”€â–º Push notification (mobile)
    â”‚
    â””â”€â–º WebSocket broadcast (temps rÃ©el)
```

---

## ğŸ—ƒï¸ SchÃ©ma Base de DonnÃ©es PostgreSQL

### Tables Principales

```sql
â”Œâ”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”
â”‚                         USERS                           â”‚
â”œâ”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”¤
â”‚ id (PK)                                                 â”‚
â”‚ name                                                    â”‚
â”‚ email (unique)                                          â”‚
â”‚ phone (unique)                                          â”‚
â”‚ password                                                â”‚
â”‚ role (enum: user, agent, admin)                        â”‚
â”‚ status (enum: active, suspended, pending)              â”‚
â”‚ email_verified_at                                       â”‚
â”‚ phone_verified_at                                       â”‚
â”‚ avatar_url                                              â”‚
â”‚ created_at, updated_at                                  â”‚
â””â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”˜
                      â”‚
                      â”‚ 1:N
                      â–¼
â”Œâ”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”
â”‚                      PROPERTIES                         â”‚
â”œâ”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”¤
â”‚ id (PK)                                                 â”‚
â”‚ user_id (FK â†’ users.id)                                â”‚
â”‚ location_id (FK â†’ locations.id)                        â”‚
â”‚ title                                                   â”‚
â”‚ description                                             â”‚
â”‚ type (enum: apartment, house, land, commercial)        â”‚
â”‚ transaction_type (enum: sale, rent, colocation)        â”‚
â”‚ price (bigint - en GNF)                                â”‚
â”‚ surface (float - en mÂ²)                                â”‚
â”‚ rooms (int)                                             â”‚
â”‚ bedrooms (int)                                          â”‚
â”‚ bathrooms (int)                                         â”‚
â”‚ floor (int)                                             â”‚
â”‚ total_floors (int)                                      â”‚
â”‚ year_built (int)                                        â”‚
â”‚ status (enum: active, pending, expired, sold)          â”‚
â”‚ moderation_status (enum: pending, approved, rejected)  â”‚
â”‚ moderation_notes (text)                                 â”‚
â”‚ views_count (int)                                       â”‚
â”‚ favorites_count (int)                                   â”‚
â”‚ featured (boolean)                                      â”‚
â”‚ expires_at (timestamp)                                  â”‚
â”‚ published_at (timestamp)                                â”‚
â”‚ created_at, updated_at                                  â”‚
â””â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”˜
                      â”‚
                      â”‚ 1:N
                      â–¼
â”Œâ”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”
â”‚                   PROPERTY_IMAGES                       â”‚
â”œâ”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”¤
â”‚ id (PK)                                                 â”‚
â”‚ property_id (FK â†’ properties.id)                       â”‚
â”‚ url (text)                                              â”‚
â”‚ thumbnail_url (text)                                    â”‚
â”‚ order (int)                                             â”‚
â”‚ is_primary (boolean)                                    â”‚
â”‚ created_at, updated_at                                  â”‚
â””â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”˜

â”Œâ”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”
â”‚                      LOCATIONS                          â”‚
â”œâ”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”¤
â”‚ id (PK)                                                 â”‚
â”‚ parent_id (FK â†’ locations.id, nullable)                â”‚
â”‚ name (string)                                           â”‚
â”‚ slug (string, unique)                                   â”‚
â”‚ type (enum: region, prefecture, commune, quartier)     â”‚
â”‚ latitude (float)                                        â”‚
â”‚ longitude (float)                                       â”‚
â”‚ properties_count (int)                                  â”‚
â”‚ created_at, updated_at                                  â”‚
â””â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”˜

â”Œâ”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”
â”‚                       MESSAGES                          â”‚
â”œâ”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”¤
â”‚ id (PK)                                                 â”‚
â”‚ sender_id (FK â†’ users.id)                              â”‚
â”‚ receiver_id (FK â†’ users.id)                            â”‚
â”‚ property_id (FK â†’ properties.id, nullable)             â”‚
â”‚ subject (string)                                        â”‚
â”‚ body (text)                                             â”‚
â”‚ read_at (timestamp, nullable)                           â”‚
â”‚ created_at, updated_at                                  â”‚
â””â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”˜

â”Œâ”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”
â”‚                      FAVORITES                          â”‚
â”œâ”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”¤
â”‚ id (PK)                                                 â”‚
â”‚ user_id (FK â†’ users.id)                                â”‚
â”‚ property_id (FK â†’ properties.id)                       â”‚
â”‚ created_at                                              â”‚
â”‚ UNIQUE(user_id, property_id)                           â”‚
â””â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”˜

â”Œâ”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”
â”‚                   SAVED_SEARCHES                        â”‚
â”œâ”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”¤
â”‚ id (PK)                                                 â”‚
â”‚ user_id (FK â†’ users.id)                                â”‚
â”‚ name (string)                                           â”‚
â”‚ query_params (json)                                     â”‚
â”‚ notification_enabled (boolean)                          â”‚
â”‚ created_at, updated_at                                  â”‚
â””â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”˜

â”Œâ”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”
â”‚                       REVIEWS                           â”‚
â”œâ”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”¤
â”‚ id (PK)                                                 â”‚
â”‚ reviewer_id (FK â†’ users.id)                            â”‚
â”‚ reviewed_id (FK â†’ users.id)                            â”‚
â”‚ rating (int 1-5)                                        â”‚
â”‚ comment (text)                                          â”‚
â”‚ created_at, updated_at                                  â”‚
â””â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”˜

â”Œâ”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”
â”‚                   PROPERTY_VIEWS                        â”‚
â”œâ”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”¤
â”‚ id (PK)                                                 â”‚
â”‚ property_id (FK â†’ properties.id)                       â”‚
â”‚ user_id (FK â†’ users.id, nullable)                      â”‚
â”‚ ip_address (string)                                     â”‚
â”‚ user_agent (text)                                       â”‚
â”‚ created_at                                              â”‚
â””â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”˜

â”Œâ”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”
â”‚                    NOTIFICATIONS                        â”‚
â”œâ”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”¤
â”‚ id (PK)                                                 â”‚
â”‚ user_id (FK â†’ users.id)                                â”‚
â”‚ type (string)                                           â”‚
â”‚ data (json)                                             â”‚
â”‚ read_at (timestamp, nullable)                           â”‚
â”‚ created_at, updated_at                                  â”‚
â””â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”˜
```

---

## ğŸ” SÃ©curitÃ©

### Authentification
- **JWT Tokens** pour l'API
- **Sessions Redis** pour le web
- **OAuth2** (optionnel pour Google/Facebook)

### Autorisation
```php
// Exemple de politique Laravel
Gate::define('update-property', function ($user, $property) {
    return $user->id === $property->user_id 
        || $user->role === 'admin';
});
```

### Rate Limiting
```
- Recherche: 60 requÃªtes/minute
- Upload: 10 fichiers/heure
- Messagerie: 20 messages/heure
- API publique: 100 requÃªtes/minute
```

### Validation
- Sanitization des inputs
- CSRF Protection
- XSS Protection
- SQL Injection (via Eloquent ORM)

---

## ğŸš€ Performance

### StratÃ©gie de Cache

```
â”Œâ”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”
â”‚         Redis Cache Layers          â”‚
â”œâ”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”¤
â”‚ L1: Results (10 min)                â”‚
â”‚ L2: Properties (1 hour)             â”‚
â”‚ L3: Static data (24 hours)          â”‚
â”‚ L4: Config (permanent)              â”‚
â””â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”˜
```

### Optimisations
- **Images**: WebP + Lazy Loading + CDN
- **Database**: Indexes, Query optimization
- **API**: Pagination, Partial responses
- **Frontend**: Code splitting, Tree shaking

---

## ğŸ“Š Monitoring & Logs

```
Application Logs â†’ PostgreSQL
    â”‚
    â”œâ”€â–º Erreurs â†’ Sentry (production)
    â”‚
    â”œâ”€â–º Performance â†’ New Relic (optionnel)
    â”‚
    â””â”€â–º Analytics â†’ Google Analytics

Queue Monitoring â†’ Horizon (Laravel)

Infrastructure â†’ Docker stats / Grafana
```

---

## ğŸ”„ CI/CD Pipeline (Future)

```
Git Push
    â”‚
    â–¼
GitHub Actions / GitLab CI
    â”‚
    â”œâ”€â–º Tests unitaires
    â”‚
    â”œâ”€â–º Tests d'intÃ©gration
    â”‚
    â”œâ”€â–º Build Docker images
    â”‚
    â”œâ”€â–º Security scan
    â”‚
    â””â”€â–º Deploy
        â”‚
        â”œâ”€â–º Staging
        â”‚
        â””â”€â–º Production (aprÃ¨s approbation)
```

---

## ğŸŒ DÃ©ploiement Production

### Infrastructure RecommandÃ©e

```
â”Œâ”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”
â”‚        Load Balancer (Nginx)        â”‚
â””â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”¬â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”˜
               â”‚
        â”Œâ”€â”€â”€â”€â”€â”€â”´â”€â”€â”€â”€â”€â”€â”
        â”‚             â”‚
â”Œâ”€â”€â”€â”€â”€â”€â”€â–¼â”€â”€â”€â”€â”  â”Œâ”€â”€â”€â”€â–¼â”€â”€â”€â”€â”€â”€â”€â”€â”
â”‚  App 1     â”‚  â”‚   App 2     â”‚
â”‚  (Laravel) â”‚  â”‚  (Laravel)  â”‚
â””â”€â”€â”€â”€â”€â”¬â”€â”€â”€â”€â”€â”€â”˜  â””â”€â”€â”€â”€â”€â”€â”¬â”€â”€â”€â”€â”€â”€â”˜
      â”‚                â”‚
      â””â”€â”€â”€â”€â”€â”€â”€â”€â”¬â”€â”€â”€â”€â”€â”€â”€â”˜
               â”‚
     â”Œâ”€â”€â”€â”€â”€â”€â”€â”€â”€â–¼â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”
     â”‚  PostgreSQL Primaryâ”‚
     â”‚  + Read Replicas   â”‚
     â””â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”˜
```

### HÃ©bergement GuinÃ©e
- **VPS Local**: Si disponible (meilleur ping)
- **Cloud**: AWS, DigitalOcean, Linode
- **CDN**: CloudFlare (cache + protection)

---

## ğŸ“ˆ Scaling Strategy

### Phase 1 (0-1000 users)
- 1 serveur tout-en-un
- PostgreSQL + Redis sur mÃªme machine
- Backup quotidien

### Phase 2 (1000-10000 users)
- SÃ©paration app / database
- Redis dÃ©diÃ©
- Load balancer

### Phase 3 (10000+ users)
- Multiple app servers
- Database replicas
- CDN pour assets
- Cache distribuÃ©
- Microservices (optionnel)

---

Cette architecture est conÃ§ue pour Ãªtre:
- âœ… **Ã‰volutive**: Peut grandir avec votre business
- âœ… **RÃ©siliente**: Gestion des erreurs et failover
- âœ… **Performante**: Cache multi-niveaux
- âœ… **Maintenable**: Code propre, bien organisÃ©
- âœ… **SÃ©curisÃ©e**: Multiple couches de sÃ©curitÃ©
